

$(document).ready(function () {
    $(document).ready(function () {
        $('.navbar-toggle').on('click', function () {
            $("#demo").trigger("click");
        });
    });

    $.post('/Info/GetCurrentCreditValue', function (data, status) {
        if (data.credit) {
            if (data.credit != undefined) {
                $('#creditA').html(arabicNum(data.credit.toLocaleString()) + "ريال");
                $('#wallet-ballance').html(arabicNum(data.credit.toLocaleString()) + "ريال");
            }
        } else {
            try {

                if (data.credit == 0) {

                    $('#creditA').html(arabicNum(data.credit.toLocaleString()) + " ريال");
                    $('#wallet-ballance').html(arabicNum(data.credit.toLocaleString()) + " ريال");
                }
            } catch (e) {

            }
        }
    });
    function arabicNum(num) {
        return num.split('0').join('۰').split('1').join('۱').split('2').join('۲').split('3').join('۳').split('4').join('۴').split('5').join('۵')
            .split('6').join('۶').split('7').join('۷').split('8').join('۸').split('9').join('۹');
    }


    window.onload = function (event) {
        $('#loading').hide();
    };
    window.onbeforeunload = function (event) {
        $('#loading').show();
        var newLocation = document.activeElement.href;
        if (newLocation == this.undefined) {
            setTimeout(function () { $('#loading').hide(); }, 500);
        }
        else {
            newLocation = newLocation.toString().toLowerCase();
            if (newLocation.endsWith(".jpg") || newLocation.endsWith(".png")
                || newLocation.endsWith(".jpeg")
                || newLocation.endsWith(".pdf")
                || newLocation.endsWith(".gif")
                || newLocation.endsWith(".doc")
                || newLocation.endsWith(".docx")
                || newLocation.endsWith(".txt")
                || newLocation.endsWith(".csv")
                || newLocation.endsWith(".xls")
                || newLocation.endsWith(".xlsx")
                || newLocation.endsWith(".ppt")
                || newLocation.endsWith(".pptx")
            ) {
                setTimeout(function () { $('#loading').hide(); }, 3000);
            }
        }
    }
    window.unload = function (event) {
        $('#loading').hide();
    }

    window.onerror = function (message, source, lineno, colno, error) { $('#loading').hide(); };

    $('#reloadData').on('click', function () {
        window.location.href = window.location.href;
    });

    var _typeOfCustomDialoug = "";
    function customeSetter(typeOfCustomDialoug) {
        _typeOfCustomDialoug = typeOfCustomDialoug;
        if (typeOfCustomDialoug == "exit") {
            $("#CustomModalLbl").html("خروج");
            $("#CustomModalBtn").html("بله");
            $("#CustomModalSpan").html("از حساب کاربری خود خارج می‌شوید؟");
        }
    }
    $('#CustomModalBtn').on('click', function () {
        deb();
        //if (_typeOfCustomDialoug == "exit")
            $('#logoutForm').submit();
        //else if (_typeOfCustomDialoug == "exit")
        //    ;
    });

    $('#intro-code').html(text.split('=')[1]);
    document.getElementById('whatsapp-btn-Affiliate').addEventListener('click', function (event) {
        window.location.href = "https://api.whatsapp.com/send?text=" + encodeURI(AffiliateLink);
    });

    document.getElementById('telegram-btn-Affiliate').addEventListener('click', function (event) {
        window.location.href = "tg://msg?text=" + encodeURI(AffiliateLink);
    });
    var smsBtn = document.getElementById('SMS-btn-Affiliate');
    if (smsBtn) {
        smsBtn.addEventListener('click', function (event) {
            $('#modalShower').trigger('click');
            setTimeout(function () {
                $('#MobileNumber').val('');
                $('#MobileNumber').focus();
            }, 3000);
            $('#lblWaiting').hide();
        });
    }
    try {
        document.getElementById('copy-btn-Affiliate').addEventListener('click', function (event) {
            copy(AffiliateLink);
        });
    } catch (e) {

    }
    document.getElementById('SendSMSBtn').addEventListener('click', function (event) {
        
        $('#lblWaiting').show();
      
        var location = window.location.href;
        if ($('#MobileNumber').val()) {
            $('#loading').show();
            $('#SendSMSBtn').hide();
            $.post('/Info/sendAffiliateLinkSMS', { mobile: $('#MobileNumber').val() }, function (data, status) {
                deb();
                if (data.res > 0) {
                    alert('پیامک با موفقیت ارسال شد');
                } else {
                    alert('مشکلی وجود دارد و پیامک ارسال نشد');
                }
                $('#myModal').modal('toggle');
                $('#loading').hide();
                $('#SendSMSBtn').show();
            });
        } else {
            alert('شماره موبایل اجباری است');
            $('#SendSMSBtn').show();
        }
    });
    document.getElementById('SendSMSBtnCancel').addEventListener('click', function (event) {

        $('#lblWaiting').hide();
        $('#SendSMSBtn').show();
     
    });
    
});
function copy(text) {
    var input = document.createElement('input');
    input.setAttribute('value', text);
    document.body.appendChild(input);


    input.select();
    input.setSelectionRange(0, 99999); /*For mobile devices*/

    document.execCommand('copy');
    document.body.removeChild(input);
}