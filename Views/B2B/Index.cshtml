
@{
    ViewData["Title"] = "گزارش B2B";
    Layout = "~/Views/Shared/_LayoutPaycell.cshtml";
}
<h1>گزارش B2B</h1>
<div class="panel panel-default panel-group">
    <div class="panel-heading">داشبورد</div>

    <div class="panel-body panel-group">
        @if (ViewBag.Summery != null)
        {
            foreach (var item in ViewBag.Summery.Rows)
            {
                <div class="col-sm-3">
                    <div class="dash-tile  clearfix animation-pullDown">
                        <div class="dash-tile-header">
                            <div class="dash-tile-options">
                                <div class="btn-group">
                                </div>
                            </div>
                            @item["ProductTitle"] - @item["Amount"]
                        </div>
                        <div class="dash-tile-icon"><i class="fas fa-dollar-sign"></i></div>
                        <div class="dash-tile-text"><span> @item["SumAmount"]</span></div>
                        <div class="dash-tile-icon"><span>عدد</span></div>
                        <div class="dash-tile-text"><span>@item["Count"]</span></div>
                    </div>
                </div>
            }
            <script type="text/javascript">
                var elems = document.getElementsByClassName('dash-tile');
                for (var i = 0; i < elems.length; i++) {
                    var classN = "dash-tile-ocean";
                    if (i % 8 == 1)
                        classN = "dash-tile-leaf";
                    else if (i % 8 == 2)
                        classN = "dash-tile-flower";
                    else if (i % 8 == 3)
                        classN = "dash-tile-fruit";
                    else if (i % 8 == 4)
                        classN = "dash-tile-oil";
                    else if (i % 8 == 5)
                        classN = "dash-tile-dark";
                    else if (i % 8 == 6)
                        classN = "dash-tile-balloon";
                    else if (i % 8 == 7)
                        classN = "dash-tile-doll";
                    elems[i].classList.add(classN);
                }
            </script>
        }
    </div>
</div>
<div class="panel panel-default panel-group">
    <div class="panel-heading">پارامترها</div>
    <div class="panel-body panel-group">
        <form>
            <div class="col-sm-3">
                <label for="fromDate">از تاریخ</label>
                <input name="FromDateJalali" id="FromDateJalali" placeholder="از تاریخ" autocomplete="off" class="form-control persian-date pwt-datepicker-input-element">
            </div>
            <div class="col-sm-3">
                <label for="ToDateJalali">تا تاریخ</label>
                <input name="ToDateJalali" id="ToDateJalali" placeholder="تا تاریخ" autocomplete="off" class="form-control persian-date pwt-datepicker-input-element">
            </div>
            <div class="col-sm-3">
                <label for="Number">شماره همراه</label>
                <input name="Number" id="Number" class="form-control" />
            </div>
            <div class="col-sm-3">
                <label for="TransactionId">شماره تراکنش</label>
                <input name="TransactionId" class="form-control" id="TransactionId" />
            </div>
            <div class="col-sm-3">
                <label for="Staus">وضعیت تراکنش</label>
                <select name="Staus" id="Staus" class="form-control">
                    <option value="3">موفق</option>
                    <option value="-1">همه</option>
                    <option value="-2">غیر موفق</option>
                </select>
            </div>
            <div class="col-sm-3">
                <label>&nbsp;</label>
                <button type="submit" class="form-control btn btn-success">جست و جو</button>
            </div>
        </form>
    </div>
</div>
@*<div class="panel panel-default panel-group">
    <div class="panel-heading">خلاصه وضعیت</div>

    <div class="panel-body panel-group">
        <table id="datatable3" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>عنوان محصول</th>
                    <th>مبلغ</th>
                    <th>تعداد</th>
                    <th>مبلغ کل</th>
                </tr>
            </thead>
            <tbody>
                @if (ViewBag.Summery != null)
                {
                    foreach (var item in ViewBag.Summery.Rows)
                    {
                        <tr>
                            <td>@item["ProductTitle"]</td>
                            <td>@item["Amount"]</td>
                            <td>@item["Count"]</td>
                            <td>@item["SumAmount"]</td>
                        </tr>
                    }
                }
            </tbody>
            <tfooter>
                <tr>
                    <th>عنوان محصول</th>
                    <th>مبلغ</th>
                    <th>تعداد</th>
                    <th>مبلغ کل</th>
                </tr>
            </tfooter>
        </table>
    </div>
</div>*@
<div class="panel panel-default panel-group">
    <div class="panel-heading">جزئیات</div>

    <div class="panel-body panel-group">
        <table id="datatable" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>عنوان محصول</th>
                    <th>مبلغ</th>
                    <th>تاریخ</th>
                    <th>وضعیت</th>
                    <th>کد</th>
                    <th>اطلاعات</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
            <tfoot>
                <tr>
                    <th>عنوان محصول</th>
                    <th>مبلغ</th>
                    <th>تاریخ</th>
                    <th>وضعیت</th>
                    <th>کد</th>
                    <th>اطلاعات</th>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
@section Scripts{

    <style>
        .panel {
            height: auto;
        }

        .panel-body {
            position: static;
        }

        #datatable_filter label {
            display: inline-flex;
            float: right;
        }

        #datatable_wrapper .dt-buttons.btn-group {
            float: left;
        }
    </style>
    <script src="/lib/bootstrap/dist/js/bootstrap-toggle.min.js"></script>

    <script type="text/javascript" src="/datatables/dataTables.min.js"></script>
    <script type="text/javascript" src="/datatables/FixedHeader-3.1.6/js/dataTables.fixedHeader.min.js"></script>
    <script type="text/javascript" src="/datatables/Buttons-1.6.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="/datatables/JSZip-2.5.0/jszip.min.js"></script>
    <script type="text/javascript" src="/datatables/pdfmake-0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="/datatables/pdfmake-0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="/datatables/Buttons-1.6.0/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="/datatables/Buttons-1.6.0/js/buttons.print.min.js"></script>
    <link id="datepickerTheme" href="/persiandate/css/persian-datepicker.min.css" rel="stylesheet" />
    <script type="text/javascript" src="/persiandate/js/persian-date.min.js"></script>
    <script type="text/javascript" src="/persiandate/js/persian-datepicker.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            window.pd = $('.persian-date').each(function (index, elem) {
                $(this).persianDatepicker({
                    //altField: "#alt" + (index + 1).toString(),
                    altFormat: 'LLLL',
                    initialValue: false,
                    observer: true,
                    format: 'YYYY/MM/DD',
                    //timePicker: {
                    //    enabled: true
                    //}
                });
            });
            // Setup - add a text input to each footer cell
            $('table tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class="form-control" style="width: 100%;font-size: 10px;" placeholder="جست و جوی ' + title + '" />');
            });

            // DataTable
            var table = $('#datatable').DataTable({
                dom: "Bfrtip",
                "order": [[2, "desc"]],
                "bAutoWidth": false,
                scrollX: true,
                "autoWidth": false,
                //fixedColumns: true,
                bProcessing: true,
                sAjaxSource: '/B2B/IndexAjaxData',
                "sServerMethod": "POST",
                buttons: [
                    {
                        extend: "copy",
                        className: "btn-sm"
                    },
                    {
                        extend: "csv",
                        className: "btn-sm"
                    },
                    {
                        extend: "excel",
                        className: "btn-sm"
                    },
                    {
                        extend: "print",
                        className: "btn-sm"
                    },
                    {
                        extend: "pdf",
                        className: "btn-sm"
                    },
                    //{
                    //    extend: "pdfHtml5",
                    //    className: "btn-sm"
                    //},
                    //'colvis'

                ],
                //"mRender": function(data, type, full) {
                //    return '<a class="btn btn-info btn-sm" href=#/' + full[0] + '>' + 'Edit' + '</a>';
                //},
                //columnDefs: [ {
                //    targets: -1,
                //    visible: false
                //} ],
                "sPaginationType": "full_numbers",
                "pageLength": 25,
                "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                //responsive: true
            });

            // Apply the search
            table.columns().every(function () {
                var that = this;

                $('input', this.footer()).on('keyup change', function () {
                    if (that.search() !== this.value) {
                        that
                            .search(this.value)
                            .draw();
                    }
                });
            });

            $('input.ace-switch-datagrid').on('click', function (e) {
                //e.preventDefault();

                // Get the column API object
                var column = table.column($(this).attr('data-column'));

                // Toggle the visibility
                column.visible(!column.visible());
            });
            // DataTable
            //var table2 = $('#datatable3').DataTable({
            //    dom: "Bfrtip",
            //    "order": [[2, "desc"]],
            //    "bAutoWidth": false,
            //    scrollX: true,
            //    "autoWidth": false,
            //    //fixedColumns: true,
            //    buttons: [
            //        {
            //            extend: "copy",
            //            className: "btn-sm"
            //        },
            //        {
            //            extend: "csv",
            //            className: "btn-sm"
            //        },
            //        {
            //            extend: "excel",
            //            className: "btn-sm"
            //        },
            //        {
            //            extend: "print",
            //            className: "btn-sm"
            //        },
            //        {
            //            extend: "pdf",
            //            className: "btn-sm"
            //        },
            //        //{
            //        //    extend: "pdfHtml5",
            //        //    className: "btn-sm"
            //        //},
            //        //'colvis'

            //    ],
            //    //"mRender": function(data, type, full) {
            //    //    return '<a class="btn btn-info btn-sm" href=#/' + full[0] + '>' + 'Edit' + '</a>';
            //    //},
            //    //columnDefs: [ {
            //    //    targets: -1,
            //    //    visible: false
            //    //} ],
            //    "sPaginationType": "full_numbers",
            //    "pageLength": 25,
            //    "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
            //    //responsive: true
            //});

            //// Apply the search
            //table2.columns().every(function () {
            //    var that = this;

            //    $('input', this.footer()).on('keyup change', function () {
            //        if (that.search() !== this.value) {
            //            that
            //                .search(this.value)
            //                .draw();
            //        }
            //    });
            //});

            //$('input.ace-switch-datagrid').on('click', function (e) {
            //    //e.preventDefault();

            //    // Get the column API object
            //    var column = table.column($(this).attr('data-column'));

            //    // Toggle the visibility
            //    column.visible(!column.visible());
            //});
        });

    </script>
<link href="/Mobile/dashboard.css" rel="stylesheet" />
}
