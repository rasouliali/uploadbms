@{
    ViewData["Title"] = "معرف";
    ViewData.AddActivePage(ManageNavPages.Introducer);

}

@section header {
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap-toggle.min.css" />

    <link rel="stylesheet" type="text/css" href="~/datatables/datatables.min.css" />
    <link rel="stylesheet" type="text/css" href="~/datatables/DataTables-1.10.20/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="~/datatables/Buttons-1.6.0/css/buttons.dataTables.min.css">

}

<h1>سطوح معرفین<span class="backb"><a href="javascript:history.back()"><i class="icon-arrow-left"></i> بازگشت</a></span></h1>
@if (ViewBag.Collection != null && ViewBag.Collection.Count > 0)
{
    <div class="row table ">
        <table class="table">
            <thead>
                <tr>
                    <th>نام کاربری</th>
                    <th>سطح</th>
                    <th>زیرشاخه</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.Collection)
                {
                    <tr>
                        <td class="hmobile">@item[0]</td>
                        <td>@item[1]</td>
                        <td>@item[2]</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

}
@if (string.IsNullOrEmpty(ViewBag.Username) == false)
{
    <div class="row">
        <label class="col-sm-12 label-success">@ViewBag.Info</label>
    </div>
    <div class="row">
        <label class="col-sm-4">نام کاربری معرف:</label>
        <label class="col-sm-8">@ViewBag.Username</label>
    </div>
    if (string.IsNullOrEmpty(ViewBag.Email) == false)
    {
        <div class="row">
            <label class="col-sm-4">ایمیل معرف:</label>
            <label class="col-sm-8">@ViewBag.Email</label>
        </div>
    }
}


@*@if (string.IsNullOrEmpty(ViewBag.Link) == false)
    {
        <div class="row">
            <label class="col-sm-4">لینک معرفی شما:</label>
            <label class="col-sm-8" style="height:30px;vertical-align:middle;margin-top:8px;">
                @ViewBag.Link
                <button id="copy-btn" class="btn btn-default" data-ng-false-value="@ViewBag.Link" style="float:right;margin-top:-8px;">کپی</button>
                <button id="whatsapp-btn" class="btn btn-default" data-ng-false-value="@ViewBag.Link" style="float:right;margin-top:-8px;">Wh<i class="glyphicon glyphicon-share-alt"></i></button>
                <button id="telegram-btn" class="btn btn-default" data-ng-false-value="@ViewBag.Link" style="float:right;margin-top:-8px;">Tel<i class="glyphicon glyphicon-share-alt"></i></button>
            </label>
        </div>
        <div class="row" style="margin-top:36px">
            <label class="col-sm-4">ارسال متن دعوت:</label>
            <label class="col-sm-8" style="height:30px;vertical-align:middle;margin-top:8px;">
            <button id="copy-btn-Affiliate" class="btn btn-default" style="float:right;margin-top:-8px;">کپی</button>
            <button id="whatsapp-btn-Affiliate" class="btn btn-default" style="float:right;margin-top:-8px;">Wh<i class="glyphicon glyphicon-share-alt"></i></button>
            <button id="telegram-btn-Affiliate" class="btn btn-default" style="float:right;margin-top:-8px;">Tel<i class="glyphicon glyphicon-share-alt"></i></button>
            @if (ViewBag.CanAffiliateTextSendBySMS)
            {
                <button id="SMS-btn-Affiliate" class="btn btn-default" style="float:right;margin-top:-8px;">SMS<i class="glyphicon glyphicon-share-alt"></i></button>
            }
            </label>
        </div>
    }*@
@*<div class="row">
        <div class="col-md-4">
            <form method="post" action="/Manage/Introducer">

                <div class="form-group">
                    <label for="Introducer"></label>
                    <input name="Introducer" id="Introducer" class="form-control" placeholder="نام کاربری یا ایمیل معرف شما" />
                    <span class="text-danger">@ViewBag.IntroducerError</span>
                </div>
                <div class="col-md-6">
                    <button type="submit" class="btn btn-primary" name="sbtType" value="submit">ثبت</button>
                </div>
            </form>
        </div>
    </div>*@
<style>
    .row.table {
        margin: 0 16px;
        width: 94%;
    }
    th {
        text-align: right;
    }
</style>
@section Scripts{
<style>
    table {
        background-color: white;
    }
    th {
        color: #e88700;
    }
    td {
        color: #3c4a3e;
    }
    .table thead > tr > th {
        border-color: transparent;
        border-bottom: #e88700 solid 1px;
        text-align:center;
    }
    .table tbody > tr > td {
        border-color: transparent;
    }
</style>
    @*<script src="~/lib/bootstrap/dist/js/bootstrap-toggle.min.js"></scri>

    <script type="text/javascript" src="~/datatables/dataTables.min.js"></script>
    <script type="text/javascript" src="~/datatables/FixedHeader-3.1.6/js/dataTables.fixedHeader.min.js"></script>
    <script type="text/javascript" src="~/datatables/Buttons-1.6.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="~/datatables/JSZip-2.5.0/jszip.min.js"></script>
    <script type="text/javascript" src="~/datatables/pdfmake-0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="~/datatables/pdfmake-0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="~/datatables/Buttons-1.6.0/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="~/datatables/Buttons-1.6.0/js/buttons.print.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            //debugger;
            var strElem = "";
            $('table thead tr th').each(function (index, elem) {
                strElem += "<th>" + $($('table thead tr th')[index]).text() + "</th>";
            });
            $($('table')[0]).append("<tfoot><tr>" + strElem + "</tr></tfoot>");
            $('table tfoot tr th').each(function (i) {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');

                $('input', this).on('keyup change', function () {
                    if (table.column(i).search() !== this.value) {
                        table
                            .column(i)
                            .search(this.value)
                            .draw();
                    }
                });
            });

            var table = $($('table')[0]).DataTable({
                //fixedHeader: true,
                orderCellsTop: true,
                //responsive: true,
                dom: 'Bfrtip', "order": [],
                buttons: [
                    {
                        extend: 'collection',
                        text: 'Export',
                        buttons: [
                            'copy',
                            'excel',
                            'csv',
                            'pdf',
                            'print'
                        ]
                    }
                ],
                "bAutoWidth": false,
            });
            $($('table')[0]).on("order.dt", function () {

                if (table.settings().order().length === 1) {
                    var order = table.settings().order()[0];
                    var th = $("table th:eq(" + order[0] + ")");
                    if (th.attr("data-sort-next") === "false") {
                        table.order([]).draw();
                        th.attr("data-sort-next", true);
                    } else {
                        if (order[1] === "desc") {
                            th.attr("data-sort-next", false);
                        } else {
                            th.attr("data-sort-next", true);
                        }
                    }
                }
            });
            //$('.GetOtherData').each(function (elem, index, item) {
            //    $($('.GetOtherData')[index]).on('click', function () {
            //        debugger;
            //        var idV =$($('.GetOtherData')[index]).attr('data-id');
            //        $.post("/Transactions/GetTransactionData", { id: parseInt(idV) }, function (data, status) {
            //            var str = "";
            //            for (var i = 0; i < data.length; i += 2) {
            //                str += "<tr><td>" + data[i] + "</td><td>" + data[i + 1] + "</td></tr>";
            //            }
            //            $('#dataOfTransaction').html(str);
            //            $('#modalshower').trigger('click');
            //        });
            //    });
            //});
        });
    </script>*@

    <script type="text/javascript">
        $(".hmobile").each(function() {
            var rep = $(this).text();
            var match = rep.match(/^(\d{3})(\d{3})(\d{4})$/)
            if (match) {
            rep = match[1] + '***' + match[3]
            }
            $(this).text(rep);
        });
    </script>
}


